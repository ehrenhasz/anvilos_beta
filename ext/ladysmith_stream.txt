// INITIATING STREAM FOR: Create a VirtIO Network Driver skeleton. Must include class VirtIONet and a test_init() verification function. Keep it under 50 lines.
[
  {
    "instruction": "OPS_CYCLE",
    "details": "import socket\nimport struct\n\nclass VirtIONet:\n    def __init__(self, device_id):\n        self.device_id = device_id\n        self.socket = None\n\n    def init_socket(self, ip_address, port):\n        try:\n            self.socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RAW)\n            self.socket.bind((ip_address, port))\n            self.socket.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, 1)\n            print(f\"Socket initialized on {ip_address}:{port}\")\n        except Exception as e:\n            print(f\"Error initializing socket: {e}\")\n\n    def send_packet(self, packet_data):\n        if self.socket:\n            try:\n                self.socket.sendto(packet_data, ('127.0.0.1', 0)) # Loopback for testing\n                print(\"Packet sent\")\n            except Exception as e:\n                print(f\"Error sending packet: {e}\")\n        else:\n            print(\"Socket not initialized.\")\n\ndef test_init():\n    virtio_net = VirtIONet(device_id=0x1040)\n    print(f\"VirtIONet initialized with device ID: {virtio_net.device_id}\")\n    virtio_net.init_socket('127.0.0.1', 8080)\n    # Craft a minimal IP packet (example)\n    ip_header = struct.pack('!BBHHHBBH4s4s', 0x45, 0, 20, 0, 0, 64, 6, 0, socket.inet_aton('127.0.0.1'), socket.inet_aton('127.0.0.1'))\n    virtio_net.send_packet(ip_header)\n\nif __name__ == \"__main__\":\n    test_init()\n",
    "format": "recipe.py"
  }
]